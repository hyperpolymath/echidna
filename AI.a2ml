# AI Assistant Instructions for ECHIDNA

## Repository Overview
**ECHIDNA** (Extensible Cognitive Hybrid Intelligence for Deductive Neural Assistance) is a production-ready neurosymbolic theorem proving platform.

## Critical Architecture Facts

### 17 Prover Backends (3 Layers)
- **Rust Layer**: Core implementations in `src/rust/provers/`
  - Tier 1-5 provers: Coq, Lean, Isabelle, Agda, Z3, CVC5, ACL2, PVS, HOL4, Mizar, HOL Light, Metamath, Vampire, E Prover, SPASS, Alt-Ergo, Idris2
- **Julia ML Layer**: Neural recommendations in `src/julia/`
  - Supports all 17 provers with logistic regression
  - Training data: 332 proofs, 1,603 tactics
- **Chapel Parallel Layer**: Distributed dispatch in `chapel_poc/`
  - Parallel proof search across all 17 provers

### 3 Consolidated Interfaces (Monorepo)
All interfaces located under `src/interfaces/` (consolidated in v1.4.0):
- **GraphQL** (`src/interfaces/graphql/`) - Port 8080, async-graphql + axum
- **gRPC** (`src/interfaces/grpc/`) - Port 50051, tonic + Protocol Buffers
- **REST** (`src/interfaces/rest/`) - Port 8000, axum + OpenAPI/Swagger

**IMPORTANT**: Interfaces are Cargo workspace members, not standalone repos.

### Canonical File Locations
- **SCM Files**: `.machine_readable/` ONLY (STATE.scm, META.scm, ECOSYSTEM.scm)
- **Interfaces**: `src/interfaces/{graphql,grpc,rest}/` (consolidated)
- **Provers**: `src/rust/provers/` (Rust implementations)
- **ML Layer**: `src/julia/` (neural models)
- **Parallel Layer**: `chapel_poc/` (HPC proof search)

## Critical Invariants (NEVER VIOLATE)
1. **No duplicate SCM files**: SCM files ONLY in `.machine_readable/`, never in root
2. **Monorepo pattern**: All interfaces stay under `src/interfaces/`, never extract
3. **3-layer sync**: When adding provers, update Rust + Julia + Chapel
4. **Original name**: "Cognitive Hybrid" not "Computational Heuristic"
5. **License**: PMPL-1.0-or-later throughout

## Workflow
1. Check `.machine_readable/STATE.scm` for current status and next actions
2. When modifying provers: update all 3 layers (Rust, Julia, Chapel)
3. When modifying interfaces: work within `src/interfaces/` directory
4. After changes: update STATE.scm with progress
5. Commit with concise, imperative message following CCCP

## Key Files
- `README.md` - Main documentation with architecture diagram
- `ROADMAP.adoc` - Development roadmap (v1.4.0 complete, v2.0 planned)
- `.machine_readable/STATE.scm` - Current project state
- `.machine_readable/META.scm` - Architecture decisions (ADRs)
- `.machine_readable/ECOSYSTEM.scm` - Ecosystem positioning

## Current Status (v1.4.0)
- âœ… 17 provers operational across 3 layers
- âœ… 3 interfaces consolidated into monorepo
- âœ… Full documentation updated
- ðŸ”„ **Next**: Core integration layer (FFI/IPC for interfaces â†’ Rust core)

## Testing
- Unit tests: `cargo test`
- Integration tests: `./tests/integration_test.sh`
- Benchmarks: `cargo bench`
- All tests: 99 unit + 38 integration (passing)

## Delivery Promises
- Update STATE.scm after completing tasks
- Maintain 3-layer sync when changing provers
- Keep interfaces consolidated in monorepo
- Preserve original "Cognitive Hybrid" name
